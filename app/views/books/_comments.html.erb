<section class="comments-section">
  <h2>Comments</h2>

  <% if book.comments.any? %>
    <div class="comments">
      <% book.comments.each do |comment| %>
        <div class="comment">
          <p><strong><%= comment.user.name if comment.user %></strong></p>
          <p><%= comment.content %></p>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="comment">No comments yet.</p>
  <% end %>

  <% if authenticated? %>
    <h3>Add a Comment</h3>
    <%= form_with(model: [book, book.comments.build], local: true, class: "comment-form") do |form| %>
      <div class="form-group">
        <%= form.text_area :content, class: "form-text" %>
      </div>
      <%= form.submit "Post Comment", class: "btn" %>
    <% end %>
  <% end %>
</section>
